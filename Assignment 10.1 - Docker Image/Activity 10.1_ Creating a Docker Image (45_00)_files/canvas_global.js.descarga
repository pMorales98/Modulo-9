jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)};$( ".submit_assignment_link" ).live( "click", function() {el = $('#submit_assignment');el[0].scrollIntoView({behavior: 'smooth', block: 'end'});} );$(window).on("load",function(){setTimeout(function(){location.href.includes("#submit")&&(el=$("#submit_assignment"))&&el[0]&&el[0].scrollIntoView({behavior:"smooth",block:"end"})},500)});var coursenum=klGetCourseNum(),klPopupLive={tooltipAttempt:0,otherTooltips:function(){"function"==typeof tippy&&(klPopupLive.tooltipAttempt=klPopupLive.tooltipAttempt+1,$(".dp-tooltip").each(function(e,t){var l=$(this).attr("id");void 0===l&&(l="tip-"+klPopupLive.tooltipAttempt+"-"+e,$(this).attr("id",l));var s=$(this).attr("title");$(this).attr("title",""),tippy(this,{content:s,performance:!0,arrow:!0,hideOnClick:!0,delay:300,onShow:function(e){$(window).keydown(function(t){27===t.keyCode&&e.hide()})}}),$(this).removeClass("dp-tooltip")}))}},klToolsLive={errorHandling:function(e,t){"use strict";try{-1!==$.inArray("admin",ENV.current_user_roles)||$.inArray("teacher",ENV.current_user_roles)}catch(l){console.log(l)}},capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}},klModuleDetails={modules:"",moduleCompletion:"",unpublishedIcon:'<i class="icon icon-unpublish iconStatus dp-tooltip" title="This module is unpublished"></i>',getAssignmentInfo:function(){"use strict";try{var e=$("a.edit-wiki").length>0,t=$("a.edit_assignment_link").length>0,l=$("a.edit_assignment_link").length>0,s=$("a.edit-btn").length>0,i=$("a.edit_syllabus_link").length>0;$.getJSON("https://"+location.host+"/courses/"+coursenum+"/modules/items/assignment_info",function(a){klModuleDetails.moduleCompletion=a,$.each(a,function(a,o){if(void 0!==o.past_due&&!e&&!t&&!s&&!l&&!i){if(""===klModuleDetails.moduleCompletion){var n=$("#context_module_item_"+a+" .module-item-status-icon").html();null===n||-1!==n.indexOf("Completed")||($("#context_module_item_"+a+" .module-item-status-icon").html('<span class="screenreader-only">This assignment is overdue</span><i class="icon-minimize dp-tooltip" title="This assignment is overdue"></i>'),$(".kl_mod_item_"+a+" .kl_progress_complete").hasClass("fa-check-circle")||($(".kl_mod_item_"+a+" .kl_progress_complete").attr("class","icon-minimize kl_progress_complete").css("color","black"),$(".kl_mod_item_"+a+" a").addClass("bs-bg-warning")))}else $("#context_module_item_"+a+" .module-item-status-icon i").hasClass("icon-check")||$("#context_module_item_"+a+" .module-item-status-icon").html('<span class="screenreader-only">This assignment is overdue</span><i class="icon-minimize dp-tooltip" title="This assignment is overdue"></i>'),$(".kl_mod_item_"+a+" .kl_progress_complete").hasClass("fa-check-circle")||($(".kl_mod_item_"+a+" .kl_progress_complete").attr("class","icon-minimize kl_progress_complete").css("color","black"),$(".kl_mod_item_"+a+" a").addClass("bs-bg-warning"))}if(void 0!==o.todo_date&&null!==o.todo_date){let r="";r=moment(o.todo_date).tz(ENV.TIMEZONE).isBefore(moment().startOf("year"))||moment(o.todo_date).tz(ENV.TIMEZONE).isAfter(moment().endOf("year"))?moment(o.todo_date).tz(ENV.TIMEZONE).format("MMM D, YYYY"):moment(o.todo_date).tz(ENV.TIMEZONE).format("MMM D"),0===$("#context_module_item_"+a+" .ig-details__item").length?$("#context_module_item_"+a+" .ig-details").append('<div class="due_date_display ig-details__item">'+r+"</div>"):$("#context_module_item_"+a+" .ig-details__item").html(r)}}),klPopupLive.otherTooltips()})}catch(a){klToolsLive.errorHandling("Module Details get assignment info",a)}},firstItemUpdate:function(){"use strict";try{$("#kl_modules.kl_modules_first a").each(function(){var e=$(this).attr("href"),t="",l="";void 0!==e&&e.indexOf("/modules/")>-1&&(l=(t=e.replace("/items/first",""))+"/items/first",$(this).attr("href",l))})}catch(e){klToolsLive.errorHandling("Module Update First",e)}},activeModuleCheck:function(){"use strict";try{if($("#kl_modules").length>0&&$(".kl_modules_active_start").length>0&&$(".kl_modules_active_stop").length>0){var e=new Date;$(".kl_connected_module").each(function(){var t,l;$(this).parents("li").find(".kl_modules_active_start").length>0&&$(this).parents("li").find(".kl_modules_active_stop").length>0&&(t=(t=$(this).parents("li").find(".kl_modules_active_start").html()).replace(" (","").replace(" to ",""),t=new Date(t),l=(l=$(this).parents("li").find(".kl_modules_active_stop").html()).replace(")",""),l=new Date(l+" 23:59:00"),e>=t&&e<=l&&$(this).parents("li").addClass("kl_current"))})}}catch(t){klToolsLive.errorHandling("Active Module Check",t)}},typeIcon:function(e,t){"use strict";var l="";switch(e){case"File":l="icon-paperclip";break;case"Page":l="icon-document";break;case"Discussion":l="icon-discussion";break;case"Assignment":l="icon-assignment";break;case"Quiz":l="icon-quiz";break;case"SubHeader":l="";break;case"ExternalUrl":case"ExternalTool":l="icon-link"}return void 0!==t.quiz_lti&&t.quiz_lti&&(l="icon-quiz icon-Solid"),l},moduleItemDisplay:function(e){"use strict";try{var t="",l="ig-published",s="",i="",a="",o=(this.typeIcon(e.type,e),""),n=!0,r="",d="",c="",u="",p="",m="",h=e.type.toLowerCase(),k=e.type,g=e.type,b="",f="",v="",M="",y=" student-view";switch(void 0!==ENV.PAGE_RIGHTS&&ENV.PAGE_RIGHTS.update&&(y=""),e.type){case"Discussion":h="discussion_topic",g="DiscussionTopic",k="Discussion Topic";break;case"File":h="attachment",g="Attachment";break;case"Page":h="WikiPage";break;case"SubHeader":h="context_module_sub_header locked_title",g="ContextModuleSubHeader",k="Text Header";break;case"ExternalUrl":h="external_url",k="External URL";break;case"ExternalTool":h="context_external_tool",k="External Tool"}if(void 0!==e.quiz_lti&&e.quiz_lti&&(k="New Quiz",h="lti-quiz",g="lti-quiz"),void 0!==e.completion_requirement){if(void 0!==e.completion_requirement.type)switch(e.completion_requirement.type){case"must_view":c="Must view in order to complete this module item",u="View";break;case"must_contribute":c="Not yet completed",u="Contribute";break;case"must_submit":c="Must submit the "+k,u="Submit";break;case"must_mark_done":c="Must mark as done",u="Mark done";break;case"min_score":u=c="Score at least "+e.completion_requirement.min_score}m=" with-completion-requirements"}return void 0!==e.completion_requirement&&(p=e.completion_requirement.type+"_requirement",void 0!==e.completion_requirement.min_score&&(a=e.completion_requirement.min_score),void 0!==e.completion_requirement.completed&&e.completion_requirement.completed&&(a=e.completion_requirement.min_score),void 0!==e.completion_requirement.completed&&(d=(n=e.completion_requirement.completed)?'<i class="icon-check dp-tooltip" title="Completed"></i> <span class="screenreader-only">Completed</span>':'<i class="icon-mark-as-read dp-tooltip" title="'+c+'"></i> <span class="screenreader-only">'+c+"</span>"),void 0!==e.completion_requirement.type&&(f=e.completion_requirement.type)),void 0!==e.content_details&&(void 0!==e.content_details.locked_for_user&&(void 0!==e.content_details.lock_explanation&&(o='<div class="due_date_display ig-details__item kl_module_locked"><i class="icon-lock"></i> '+e.content_details.lock_explanation+"</div>",l=""),void 0!==e.content_details.lock_info&&void 0!==e.content_details.lock_info.missing_permission&&(o="",l="ig-published")),void 0!==e.content_details.due_at&&(r=moment(e.content_details.due_at).tz(ENV.TIMEZONE).isBefore(moment().startOf("year"))||moment(e.content_details.due_at).tz(ENV.TIMEZONE).isAfter(moment().endOf("year"))?moment(e.content_details.due_at).tz(ENV.TIMEZONE).format("MMM D, YYYY"):moment(e.content_details.due_at).tz(ENV.TIMEZONE).format("MMM D"),r='<div class="due_date_display ig-details__item">'+r+"</div>"),void 0!==e.content_details.points_possible&&(i='<div class="points_possible_display ig-details__item">'+e.content_details.points_possible+" pts</div>")),void 0!==e.published&&!1===e.published?(l="",""===y&&(s='<div class="ig-admin">           <span title="Unpublished" class="publish-icon unpublished publish-icon-publish"><i class="icon-unpublish"></i><span class="publish-text" tabindex="-1">&nbsp;Unpublished</span><span class="screenreader-only accessible_label">Published.</span></span>       </div>')):""===y&&(s='<div class="ig-admin">           <span title="Published" class="publish-icon published publish-icon-published"><i class="icon-publish icon-Solid"></i><span class="publish-text" tabindex="-1">&nbsp;Published</span><span class="screenreader-only accessible_label">Published.</span></span>       </div>'),e.content_details.points_possible,void 0!==e.external_url&&(b=e.external_url),void 0!==e.new_tab&&(v=e.new_tab,M=' target="_blank"'),t='<li id="context_module_item_'+e.id+'" style="" class="context_module_item '+y+" "+h+"  indent_"+e.indent+" "+g+"_"+e.content_id+" "+p+' ">    <div class="ig-row '+l+" "+m+" "+y+'">      <a aria-label="'+e.title+'" tabindex="-1" class="for-nvda" href="'+e.html_url+'" '+M+">"+e.title+'      </a>      <span class="type_icon" title="'+k+'">        <span class="screenreader-only">'+k+'</span>        <span class="ig-type-icon">          <i class="icon-document"></i>          <i class="icon-paperclip"></i>          <i class="icon-discussion"></i>          <i class="icon-assignment"></i>          <i class="icon-quiz"></i>          <i class="icon-quiz icon-Solid"></i>          <i class="icon-link"></i>        </span>      </span>      <div class="ig-info">        <div class="module-item-title">          <span class="item_name">            <a title="'+e.title+'" class="ig-title title item_link" href="'+e.html_url+'" '+M+">              "+e.title+'            </a>            <span title="'+e.title+'" class="title locked_title">'+e.title+'</span>            <span class="points_possible" style="display: none;">'+e.content_details.points_possible+'</span>            <span class="requirement" style="display: none;">&nbsp;</span>            <span class="completion_requirement" style="display: none;">&nbsp;</span>            <span class="position" style="display: none;">'+e.position+'</span>            <span class="url" style="display: none;">'+b+'</span>            <span class="new_tab" style="display: none;">'+v+'</span>          </span>        </div>        <div class="module_item_icons nobr">          <!-- dead code? -->          <span class="criterion defined">            <span class="min_score" style="display: none;">'+a+'</span>            <span class="criterion_type" style="display: none;">'+f+'</span>          </span>          <!-- /dead code -->          <span class="type" style="display: none;">'+h+'</span>          <span class="id" style="display: none;">'+e.id+'</span>          <span class="graded" style="display: none;"></span>        </div>        <div class="ig-details">'+r+i+'          <div class="requirement-description ig-details__item">            <span class="completion_requirement">              <span class="requirement_type min_score_requirement">                <span class="unfulfilled">                  Score at least <span class="min_score">'+a+'</span>                  <span class="screenreader-only">Must score at least <span class="min_score">'+a+'</span> to complete this module item</span>                </span>                <span class="fulfilled">                  Scored at least <span class="min_score">'+a+'</span>                  <span class="screenreader-only">Module item has been completed by scoring at least <span class="min_score">'+a+'</span></span>                </span>              </span>              <span class="requirement_type must_view_requirement">                <span class="unfulfilled">                  View                  <span class="screenreader-only">Must view in order to complete this module item</span>                </span>                <span class="fulfilled">                  Viewed                  <span class="screenreader-only">Module item has been viewed and is complete</span>                </span>              </span>              <span class="requirement_type must_mark_done_requirement">                <span class="unfulfilled">                  Mark done                  <span class="screenreader-only">Must mark this module item done in order to complete</span>                </span>                <span class="fulfilled">                  Marked done                  <span class="screenreader-only">Module item marked as done and is complete</span>                </span>              </span>              <span class="requirement_type must_contribute_requirement">                <span class="unfulfilled">                  Contribute                  <span class="screenreader-only">Must contribute to this module item to complete it</span>                </span>                <span class="fulfilled">                  Contributed                  <span class="screenreader-only">Contributed to this module item and is complete</span>                </span>              </span>              <span class="requirement_type must_submit_requirement">                <span class="unfulfilled">                  Submit                  <span class="screenreader-only">Must submit this module item to complete it</span>                </span>                <span class="fulfilled">                  Submitted                  <span class="screenreader-only">Module item submitted and is complete</span>                </span>              </span>            </span>'+o+'          </div>        </div>      </div>       <div class="module-item-status-icon">'+d+"</div>"+s+"    </div>  </li>"}catch(D){klToolsLive.errorHandling("Tabbed Module Item Each",D)}},prerequisitesData:function(e){"use strict";$.getJSON("/api/v1/courses/"+coursenum+"/modules/"+e,function(t){$(".kl_module_prerequisite_"+e).replaceWith(t.name)})},moduleDetails:function(e,t){"use strict";var l="",s="",i="",a="",o="",n="",r=" student-view",d="&nbsp;",c="&nbsp;",u=e.name;if(void 0!==e.state&&(s=e.state,i=klToolsLive.capitalizeFirstLetter(e.state)),e.require_sequential_progress&&(d="true"),e.publish_final_grade&&(c="true"),void 0!==ENV.PAGE_RIGHTS&&ENV.PAGE_RIGHTS.update&&(r=""),void 0===t&&(t="kl_module_"+e.id),void 0!==e.prerequisite_module_ids&&e.prerequisite_module_ids.length>0&&(e.prerequisite_module_ids.length,$.each(e.prerequisite_module_ids,function(e,t){var l=' <span class="kl_module_prerequisite kl_module_prerequisite_'+t+'">'+t+"</span>";0===e?o+=l:o+=", "+l}),a=" kl_module_prerequisites ",n='<div class="prerequisites">       <div id="kl_prerequisites_'+e.id+'" class="prerequisites_message" title="">           <div class="prerequisites_message" title="">               Prerequisites: '+o+"           </div>       </div>     </div>"),e.items_count>100&&(u="Module is too large to display"),l='<div id="'+t+'" class="ig-list"><div class="item-group-condensed context_module '+r+" "+s+a+' context_module_hover kl_module_details kl_wrapper" aria-label="'+e.name+'" data-workflow-state="active" data-module-url="/courses/'+coursenum+"/modules/"+e.id+'" data-module-id="'+e.id+'" id="context_module_'+e.id+'" style="">   <div class="ig-header header" id="'+e.id+'">     <h3 class="screenreader-only" style="position:absolute;">'+e.name+'</h3><span class="ig-header-title ellipsis" title="'+e.name+'">  <span class="name">'+u+"</span></span>"+n+'     <div class="requirements_message">     </div>     <div class="ig-header-admin">       <div class="completion_status">         <i class="icon-check complete_icon dp-tooltip" title="Completed">           <span class="screenreader-only">Module Completed</span>         </i>         <i class="icon-minimize in_progress_icon dp-tooltip" title="In Progress">           <span class="screenreader-only">Module In Progress</span>         </i>         <i class="icon-lock locked_icon dp-tooltip" title="Locked">           <span class="screenreader-only">Module Locked</span>         </i>       </div>            <span style="display: none;">            <span class="name">'+e.name+'</span>            <span class="id">'+e.id+'</span>            <span class="publish_final_grade">'+c+'</span>            <span class="require_sequential_progress">'+d+'</span>        </span>     </div>   </div>   <div class="content" id="context_module_content_'+e.id+'">     <ul class="ig-list items context_module_items ">',e.items_count<=100?$.each(e.items,function(e,t){l+=klModuleDetails.moduleItemDisplay(t)}):(l+="<li>Module is too large to display. This module has "+e.items_count+" items and Canvas will not return items if there are more than 100</li>",console.log("!!!! Module is too large !!!!!")),l+="</ul></div>",null!==e.unlock_at){var p=moment(e.unlock_at).tz(ENV.TIMEZONE).format("MMM D"),m=moment(e.unlock_at).tz(ENV.TIMEZONE).format("LT");l+='<div class="footer">  <div class="progression_container">    <a href="#" class="progression_details_link" title="See Student Progress for this Module" style="display: none;">      <span class="progression_started"><span class="progression_started_count">0</span> In Progress</span> <span class="progression_complete"><span class="progression_complete_count">0</span> Complete</span>    </a>    <div class="unlock_details">      Will unlock <span class="displayed_unlock_at">'+p+" at "+m+"</span>    </div>  </div><!-- progression_container --></div><!-- footer -->"}return l+="</div>"},tabbedModuleDetails:function(e){"use strict";try{var t="",l=e.id,s=e.state,i=$("#kl_modules a[data-api-endpoint$='/courses/"+coursenum+"/modules/"+l+"']"),a=!1,o=!1;i.length>0&&(void 0!==e.published&&!1===e.published&&i.addClass("kl_unpublished").append(klModuleDetails.unpublishedIcon),i.addClass("kl_found"),a=i.length>0,void 0!==e.prerequisite_module_ids&&e.prerequisite_module_ids.length>0||e.require_sequential_progress?o=!0:void 0!==e.items&&e.items.length>0&&$.each(e.items,function(e,t){void 0!==t.completion_requirement&&(o=!0)}),"locked"===s?i.addClass("kl_tab_locked").append('<i class="icon icon-lock iconStatus dp-tooltip" title="Locked"><span class="screenreader-only">Locked</span></i>'):"completed"===s&&o&&i.addClass("kl_tab_completed").append('<i class="icon icon-check iconStatus dp-tooltip" title="Completed"><span class="screenreader-only">Completed</span></i>'),a&&(t+=klModuleDetails.moduleDetails(e,"kl_module_content_"+l),$("#kl_modules").append(t)))}catch(n){klToolsLive.errorHandling("Tabbed Module Each",n)}},progressDetails:function(){"use strict";try{$(".kl_module_progress").length>0&&$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence.js",function(){$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence-timezone.js",function(){console.log("presence.js Loaded."),$(".kl_module_progress").each(function(e){var t="",l="";$(this).is("a")?t=$(this).attr("data-api-endpoint"):""!==klModuleDetails.currentModuleID&&(t="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID),$(this).attr("id","kl_module_progress_"+e),""!==t?$.getJSON(t+"?include[]=items&include[]=content_details&student_id&per_page=100",function(e){l+='<div id="kl_module_content_'+e.id+'" class="kl_module_content kl_wrapper">',l+=klModuleDetails.moduleDetails(e)}).done(function(){if(l+="</div>",$("#kl_module_progress_"+e).replaceWith(l),$(".kl_module_prerequisites").each(function(){$(this).find(".kl_module_prerequisite").each(function(){var e=$(this).text();$(this).hasClass("kl_name_updated")||klModuleDetails.prerequisitesData(e)})}),klModuleDetails.moduleCompleted(),""!==klModuleDetails.currentModuleID){var t=klGetURLParameter("module_item_id");0===$("li.kl_current .bs-badge").length&&($("#context_module_item_"+t).addClass("kl_current"),$(".kl_module_details li.kl_current .ig-title").prepend('<span class="screenreader-only">You are here: </span>'),$(".kl_module_details li.kl_current .ig-title").append(' <i class="fas fa-map-marker-alt"></i>'))}klModuleDetails.getAssignmentInfo()}):void 0!==ENV&&void 0!==ENV.current_user_roles&&(-1!==$.inArray("admin",ENV.current_user_roles)||-1!==$.inArray("teacher",ENV.current_user_roles))&&(0===$(".kl_module_progress_unknown").length?klModuleDetails.moduleProgressMessage("#kl_module_progress_"+e,"module details"):$("#kl_module_progress_"+e).remove())})})})}catch(e){klToolsLive.errorHandling("Module progress display",e)}},tabbedModulePagedResults:function(e){console.log("Tabbed Results page"+e);var t=0;$.getJSON("https://"+location.host+"/api/v1/courses/"+coursenum+"/modules?include[]=items&include[]=content_details&student_id&per_page=100&page="+e,function(e){try{t=e.length,$.each(e,function(e,t){klModuleDetails.tabbedModuleDetails(t)})}catch(l){klToolsLive.errorHandling("getJSON Modules",l)}}).done(function(){try{if(100===t)klModuleDetails.tabbedModulePagedResults(e+1);else{$(".kl_connected_module").each(function(e){var t,l=$(this).html(),s=($(this).find("i").attr("class"),$(this).attr("href")),i=$(this).attr("data-api-endpoint").split("/modules/");(i=i[1]).indexOf("/")>-1&&(i=(i=i.split("/"))[0]),console.log(i),$(this).attr({href:"#kl_module_content_"+i,"data-href":s}),t=l.split(":"),void 0!==t[0]&&$(this).html(t[0])});var l,s,i="",a="545454",o="";(0===$("#kl_banner").length&&$("#kl_navigation").length>0||$("#kl_navigation").length>0&&"rgba(0, 0, 0, 0)"===i)&&(i=$("#kl_navigation").css("background-color"),("rgba(0, 0, 0, 0)"===i||"transparent"===i)&&$("#kl_navigation ul").length>0&&(i=$("#kl_navigation ul").css("background-color")),("rgba(0, 0, 0, 0)"===i||"transparent"===i)&&$("#kl_navigation ul li").length>0&&(i=$("#kl_navigation ul li").css("background-color"))),$("#kl_banner").length>0&&(i=$("#kl_banner").css("background-color"),("rgba(0, 0, 0, 0)"===i||"transparent"===i)&&$("#kl_banner h2").length>0&&(i=$("#kl_banner h2").css("background-color")),("rgba(0, 0, 0, 0)"===i||"transparent"===i)&&$("#kl_banner_left").length>0&&(i=$("#kl_banner_left").css("background-color")));var n=i.split(",");""!==i&&void 0===n[3]&&null!==i&&(a=(a=klColorsLive.hexCheck(i)).replace("#",""));var r=klColorsLive.getContrastYIQ(a),d="<style>   #kl_wrapper_3 #kl_modules.kl_modules_tabbed ul.ui-tabs-nav li.ui-tabs-active a,    #kl_wrapper_3 #kl_modules.kl_modules_tabbed ul.ui-tabs-nav li.ui-tabs-active a:hover,    #kl_wrapper_3 #kl_modules.kl_modules_tabbed ul.ui-tabs-nav li.ui-tabs-active a:focus {background: #"+a+"; color: "+r+"; cursor:pointer;}</style>";if($("head").append(d),$("#kl_modules").hasClass("kl_modules_current_uncomplete")){let c=!1;$("#kl_modules > ul a").each(function(e){if(!$(this).hasClass("kl_tab_completed")&&!c){s=e,c=!0;return}}),$dt("#kl_modules").tabs({active:s})}else $("#kl_modules .kl_current").length>0?(s=$("#kl_modules ul li.kl_current").index(),$dt("#kl_modules").tabs({active:s})):$dt("#kl_modules").tabs();l=0,$("#kl_modules .ui-tabs-nav li a").each(function(){$(this).width()>l&&(l=$(this).width())}),$("#kl_modules .ui-tabs-nav li a").each(function(){$(this).width(l+40)}),o=klColorsLive.getContrastYIQ(a),$("#kl_modules ul").addClass(o),$(".kl_module_prerequisites").each(function(){$(this).find(".kl_module_prerequisite").each(function(){var e=$(this).text();$(this).hasClass("kl_name_updated")||klModuleDetails.prerequisitesData(e)})}),klModuleDetails.getAssignmentInfo(),$("#kl_modules a.kl_connected_module:not(.kl_found)").each(function(){$(this).attr("href")}),klModuleDetails.moduleCompleted(),$(".kl_module_processing").remove()}}catch(u){klToolsLive.errorHandling("Tabbed Modules Tab Customization",u)}})},tabbedModule:function(){"use strict";try{$(".kl_modules_tabbed").length>0&&$(".kl_modules_tabbed li").length>0&&($(".kl_modules_tabbed li span").not(".kl_module_timeframe, .kl_modules_active_start, .kl_modules_active_stop").contents().unwrap(),$(".kl_modules_tabbed a.kl_connected_module").each(function(e,t){var l=$(this).attr("href");-1===l.indexOf("/modules/")&&$(this).parents("li").remove()}),$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence.js",function(){$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence-timezone.js",function(){console.log("presence.js Loaded."),$("#kl_modules").append('<div class="kl_module_processing alert alert-info"><i class="fas fa-spinner fa-spin" aria-hidden="true"></i> Gathering Module Details</div>'),klModuleDetails.tabbedModulePagedResults(1)})}))}catch(e){klToolsLive.errorHandling("Gather Module Details",e)}},currentModule:function(){"use strict";try{$(".kl_modules_quick_links").length>0&&0===$(".kl_modules_tabbed").length?$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence.js",function(){$.getScript("https://resources.student.emeritus.org/sh/progressbar/presence-timezone.js",function(){$("#kl_modules .kl_current a").each(function(e){var t=$(this).attr("data-api-endpoint"),l=($(this).html(),'<div id="kl_module_content_'+e+'" class="kl_module_content">');void 0!==t&&$.getJSON(t+"?include[]=items&include[]=content_details&student_id&per_page=100",function(e){l+=klModuleDetails.moduleDetails(e)}).done(function(){l+="</div>",$("#kl_modules").append(l),$(".kl_module_prerequisites").each(function(){$(this).find(".kl_module_prerequisite").each(function(){var e=$(this).text();$(this).hasClass("kl_name_updated")||klModuleDetails.prerequisitesData(e)})}),klModuleDetails.getAssignmentInfo(),klModuleDetails.moduleCompleted()})})})}):$(".kl_indicate_completed").length>0&&$.getJSON("https://"+location.host+"/api/v1/courses/"+coursenum+"/modules",function(e){$.each(e,function(e,t){if("completed"===t.state){let l=$("#kl_modules a[href$='/courses/"+coursenum+"/modules/"+t.id+"']"),s='<i class="icon icon-check dp-tooltip" title="Module Completed"></i>';l.find("i").length>0?l.find("i").after(s):l.prepend(s)}})})}catch(e){klToolsLive.errorHandling("Current Module Details",e)}},moduleProgressionDisplay:function(){"use strict";if(($(".kl_module_complete").length>0||$(".kl_module_complete_sequential").length>0)&&0===$(".kl_module_incomplete").length){$(".kl_module_complete_sequential").hide();var e=0,t=1,l='<div id="kl_mode_complete_controls"><label for="#kl_mod_complete_preview">Preview Completed</label> <select id="kl_mod_complete_preview"><option value="0">No Modules Completed (.kl_module_complete_0)</option>';$.getJSON("https://"+location.host+"/api/v1/courses/"+coursenum+"/modules?student_id",function(s){try{$.each(s,function(s,i){"completed"===i.state&&(e=t,$(".kl_module_complete.kl_module_complete_"+t).show()),l+='<option value="'+t+'">'+i.name+" (.kl_module_complete_"+t+")</option>",t++})}catch(i){klToolsLive.errorHandling("Module Progression Display Each",err2)}}).done(function(){$(".kl_module_complete_"+e).show(),l+="</select></div>",(-1!==$.inArray("admin",ENV.current_user_roles)||-1!==$.inArray("teacher",ENV.current_user_roles))&&($(".sticky-toolbar").append(l),$("#kl_mod_complete_preview").change(function(){var e=parseInt($("#kl_mod_complete_preview option:selected").val());$(".kl_module_complete_sequential").hide(),0===e?$(".kl_module_complete").hide():$(".kl_module_complete_0").hide(),$(".kl_module_complete_"+e).show()}))})}if($(".kl_module_incomplete").length>0){$(".kl_module_complete").hide();var s=0,i=1,a='<div id="kl_mode_complete_controls"><label for="#kl_mod_incomplete_preview">Preview Completed</label> <select id="kl_mod_incomplete_preview"><opppyon value="0">No Modules Completed (.kl_module_complete_0)</option>';$.getJSON("https://"+location.host+"/api/v1/courses/"+coursenum+"/modules?student_id",function(e){try{$.each(e,function(e,t){"completed"===t.state&&(s=i,$(".kl_module_complete.kl_module_complete_"+i).show(),$(".kl_module_incomplete.kl_module_incomplete_"+i).hide()),a+='<option value="'+i+'">'+t.name+" (.kl_module_complete_"+i+")</option>",i++})}catch(t){klToolsLive.errorHandling("Module Progression Display Each",err2)}}).done(function(){$(".kl_module_complete_"+s).show(),a+="</select></div>",(-1!==$.inArray("admin",ENV.current_user_roles)||-1!==$.inArray("teacher",ENV.current_user_roles))&&($(".sticky-toolbar").append(a),$("#kl_mod_incomplete_preview").change(function(){var e=parseInt($("#kl_mod_incomplete_preview option:selected").val());0===e?($(".kl_module_complete").hide(),$(".kl_module_incomplete").show()):$(".kl_module_complete_0").hide(),$(".kl_module_complete_"+e).show(),$(".kl_module_incomplete_"+e).hide()}))})}},currentModuleID:"",currentModuleName:"",currentModuleItemID:"",itemNotInModule:!1,itemInMultipleModules:!1,moduleName:function(){try{if($(".kl_current_module_name").length>0){if(""!==klModuleDetails.currentModuleName)$(".kl_current_module_name").html(klModuleDetails.currentModuleName);else if(""!==klModuleDetails.currentModuleID){var e="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID;$.getJSON(e,function(e){klModuleDetails.currentModuleName=e.name,$(".kl_current_module_name").html(klModuleDetails.currentModuleName)})}}}catch(t){klToolsLive.errorHandling("Module Name Gather",t)}},identifyCurrentModule:function(){"use strict";try{var e=location.pathname;"/"===e.slice(-1)&&(e=e.slice(0,-1));var t=e.split("/"),l=t[t.length-2],s=t[t.length-1],i=!1;switch(s.indexOf("take")>-1&&"pages"!==l&&(l=t[t.length-3],s=t[t.length-2]),void 0!==ENV.SEQUENCE&&(l=ENV.SEQUENCE.ASSET_TYPE,s=ENV.SEQUENCE.ASSET_ID,coursenum=ENV.SEQUENCE.COURSE_ID),l){case"pages":l="Page";break;case"discussion_topics":l="Discussion";break;case"assignments":l="Assignment";break;case"quizzes":l="Quiz"}$.each([".kl_module_progress_bar",".kl_module_progress_icons",".kl_module_progress_completion",".kl_module_progress",".dp_module_navigation_tabbed",".dp_module_tabs_nav",".dp_module_progress_partial",".kl_current_module_name"],function(e,t){$(t).length>0&&(i=!0)}),i&&(s=s.split("+").join("%2B").split("=").join("%3D"),$.getJSON("/api/v1/courses/"+coursenum+"/module_item_sequence?asset_type="+l+"&asset_id="+s,function(e){if(0===e.items.length)klModuleDetails.moduleProgressCompletion(),klModuleDetails.progressDetails(),klModuleDetails.itemNotInModule=!0;else if(1===e.items.length)klModuleDetails.currentModuleID=e.items[0].current.module_id,klModuleDetails.currentModuleItemID=e.items[0].current.id;else if(e.items.length>1){var t=klGetURLParameter("module_item_id");"undefined"!==t&&(klModuleDetails.currentModuleItemID=t,$.each(e.items,function(e,l){l.current.id===t&&(klModuleDetails.currentModuleID=l.current.module_id,klModuleDetails.itemInMultipleModules=!0)}))}}).done(function(){klModuleDetails.moduleProgressBar(),klModuleDetails.moduleProgressIcons(),klModuleDetails.moduleProgressCompletion(),klModuleDetails.progressDetails(),klModuleDetails.seattleUNavigationTabs(),klModuleDetails.partialProgressNav(),klModuleDetails.moduleName(),klPopupLive.otherTooltips()}).fail(function(){klModuleDetails.itemNotInModule=!0,klModuleDetails.progressDetails(),klModuleDetails.moduleProgressCompletion(),klPopupLive.otherTooltips()}))}catch(a){klToolsLive.errorHandling("Module Progress Bar",err2)}},moduleProgressMessage:function(e,t){"use strict";void 0!==ENV&&void 0!==ENV.current_user_roles&&(-1!==$.inArray("admin",ENV.current_user_roles)||-1!==$.inArray("teacher",ENV.current_user_roles))&&(0===$(".kl_module_progress_unknown").length?klModuleDetails.itemInMultipleModules?$(e).replaceWith('<div class="bs-alert bs-alert-danger kl_module_progress_unknown" style="background-color:#fff;padding: 0 20px;">   <p><strong><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;Teacher/Admin Only Notice - Item in Multiple Modules:&nbsp;</strong></p>   <p>This item appears in more than one module. The <strong>'+t+"</strong> will be displayed to you and to students when this content is accessed while progressing through a module (<em>module_item_id</em> listed in the url).</p></div>"):klModuleDetails.itemNotInModule?$(e).replaceWith('<div class="bs-alert bs-alert-danger kl_module_progress_unknown" style="background-color:#fff;padding: 0 20px;">   <p><strong><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;Teacher/Admin Only Notice - No module found for this item:&nbsp;</strong></p>   <p>This item does not appear to be in any modules. This item will need to be in a module for the <strong>'+t+"</strong> to display to you and to students.</p></div>"):$(e).replaceWith('<div class="bs-alert bs-alert-danger kl_module_progress_unknown" style="background-color:#fff;padding: 0 20px;">   <p><strong><i class="fa fa-exclamation-triangle" aria-hidden="true"></i>&nbsp;Teacher/Admin Only Notice - Module Item Unknown:&nbsp;</strong></p>   <p>The <strong>'+t+"</strong> will only be visible to you and to students when this content is accessed while progressing through a module.</p></div>"):$(e).remove())},moduleProgressBar:function(){"use strict";try{$(".kl_module_progress_bar").length>0&&$(".kl_module_progress_bar").each(function(e){var t="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID,l="kl_module_progress_bar_"+e,s="";(void 0!==$(this).attr("style")&&$(this).attr("style").includes("background-color")||"kl_module_progress_bar"!==$(this).attr("class"))&&(s="background-color:"+$(this).css("background-color")+";"),$(this).attr("id",l),$("#"+l).replaceWith('<div id="'+l+'" class="kl_progress"></div>'),""===klModuleDetails.currentModuleID?klModuleDetails.moduleProgressMessage("#kl_module_progress_bar_"+e,"module progress bar"):$.getJSON(t+"?include[]=items&per_page=100",function(e){var t=0,i=0,a=e.name;klModuleDetails.currentModuleName=a,e.items_count<=100?$.each(e.items,function(e,l){parseInt(l.id)===parseInt(klModuleDetails.currentModuleItemID)&&(i=t+1),"SubHeader"!==l.type&&t++}):(console.log("!!!! Module is too large !!!!!"),console.log(e.items_count),a="Module too large to display");var o=Math.floor(parseInt(i)/t*100),n='<div class="kl_progress-bar" role="progressbar" aria-valuenow="'+o+'" aria-valuemin="0" aria-valuemax="100" style="width: '+o+"%; "+s+';"> <span class="screenreader-only">'+o+'% Complete</span></div><span class="kl_progress-type"><span class="bs-badge bs-badge-light">'+a+'</span></span><span class="kl_progress-completed"><span class="bs-badge bs-badge-light">'+i+" of "+t+"</span></span>";$("#"+l).html(n)}).done(function(){})})}catch(e){klToolsLive.errorHandling("Module Progress Bar",e)}},moduleProgressIcons:function(){"use strict";try{$(".kl_module_progress_icons").length>0&&$(".kl_module_progress_icons").each(function(e){var t="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID,l="kl_module_progress_icons_"+e,s="",i="#ffffff";(void 0!==$(this).attr("style")&&$(this).attr("style").includes("background-color")||"kl_module_progress_icons"!==$(this).attr("class"))&&(s=$(this).css("background-color"),i=$(this).css("color")),$(this).attr("id",l),""===klModuleDetails.currentModuleID?klModuleDetails.moduleProgressMessage("#"+l,"module progress bar/navigation"):($("#"+l).replaceWith('<div id="'+l+'" class="kl_progress_icons"><ol aria-label="Module Progress"></ol></div>'),$.getJSON(t+"?include[]=items&per_page=100",function(e){try{klGetURLParameter("module_item_id");var t=e.name,s="kl_complete";klModuleDetails.currentModuleName=t,$.each(e.items,function(e,t){var i=t.title,a=t.type,o=klModuleDetails.typeIcon(a,t),n=t.html_url;void 0!==t.quiz_lti&&t.quiz_lti&&(a="New Quiz"),("File"===a||"Discussion"===a||"Assignment"===a||"Quiz"===a||"New Quiz"===a)&&-1===i.indexOf(a)&&(i=i+", "+a);var r="";void 0!==t.new_tab&&t.new_tab&&(r=' target="_blank"'),parseInt(t.id)===parseInt(klModuleDetails.currentModuleItemID)&&(s="kl_current",i="Current "+a+": "+i),"SubHeader"!==a&&$("#"+l+" ol").append('<li class="'+s+'"><div class="kl_colored_bar" aria-hidden="true"></div><a href="'+n+'" '+r+' title="'+i+'" aria-label="'+i+'" class="dp-tooltip"><i class="'+o+'" aria-hidden="true"></i></a></li>'),parseInt(t.id)===parseInt(klModuleDetails.currentModuleItemID)&&(s="kl_pending")})}catch(i){console.log(i)}}).done(function(){0===$("#"+l+" .kl_current").length?$("#"+l+" .kl_complete").removeClass("kl_complete"):($("#"+l+" .kl_current .kl_colored_bar").css("background-color",s),$("#"+l+" .kl_complete .kl_colored_bar").css("background-color",s),$("#"+l+" .kl_complete a").css({color:i,"background-color":s}),$("#"+l+" .kl_current a").attr("aria-current","page")),$("#"+l+" li").each(function(e,t){var s=$("#"+l+" li").length,i=($(this).find("a").attr("aria-describedby"),$(this).find("a").attr("title"));$(this).find("a").attr("title",i+" ("+(e+1)+" of "+s+")")}),klPopupLive.otherTooltips()}))})}catch(e){klToolsLive.errorHandling("Module Progress Bar",e)}},moduleProgressCompletion:function(){"use strict";try{$(".kl_module_progress_completion").length>0&&$(".kl_module_progress_completion").each(function(e){var t="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID,l="kl_module_progress_completion_"+e,s='<div id="'+l+'" class="kl_progress_completion"><ol aria-label="Module Progress" class="bs-pagination"></ol></div>',i="",a="",o="p",n="",r="",d="",c="center",u=!1;$(this)[0].hasAttribute("data-api-endpoint")&&(t=$(this).attr("data-api-endpoint"),u=!0,n=$(this).html(),o="a",r=$(this).parent().prop("tagName")),$(this).hasClass("kl_small")&&(d="bs-pagination-sm",$(this).removeClass("kl_small")),void 0!==$(this).attr("style")&&$(this).attr("style").includes("background-color")&&(i=$(this).css("background-color"),a=$(this).css("color")),$(this).attr("id",l),""!==klModuleDetails.currentModuleID||u?(c="a"===o?$(this).closest(r).css("text-align"):$(this).css("text-align"),"a"===o&&r.startsWith("H")&&$(this).hasClass("kl_module_progress_include_title")?($("#"+l).closest(r).after(s),$(this).contents().unwrap()):$("#"+l).replaceWith(s),"center"===c?$("#"+l+" .bs-pagination").addClass("bs-justify-content-center"):"right"===c&&$("#"+l+" .bs-pagination").addClass("bs-justify-content-end"),$("#"+l+" .bs-pagination").addClass(d),$.getJSON(t+"?include[]=items&per_page=100",function(e){klGetURLParameter("module_item_id");var t=e.name,s="kl_complete",i="icon-minimize",a="bs-bg-white",o="";klModuleDetails.currentModuleName=t,void 0!==e.state&&("completed"===e.state&&(i="fas fa-check",a="bs-bg-success"),o='<li class="bs-page-item dp-tooltip" title="Module '+e.state+'"><span class="bs-page-link '+a+'"><i class="'+i+'" aria-hidden="true"></i>&nbsp;<i class="icon-module" aria-hidden="true"></i><span class="screenreader-only">Module '+e.state+"</span></span></li>",$("#"+l+" ul").prepend(o)),$.each(e.items,function(e,t){var i=t.title,a=t.type,o=klModuleDetails.typeIcon(a,t),n=t.html_url,r="",d="",c="",u="";if(void 0!==t.completion_requirement){if(void 0!==t.completion_requirement.type)switch(t.completion_requirement.type){case"must_view":d="(Must view in order to complete this module item)";break;case"must_contribute":d="(Not yet completed)";break;case"must_submit":d="(Must submit the "+t.type+")";break;case"must_mark_done":d="(Must mark as done)";break;case"min_score":d="(Score at least "+t.completion_requirement.min_score+")"}void 0!==t.completion_requirement.completed&&((r=t.completion_requirement.completed)?(c='<i class="fas fa-check-circle kl_progress_complete kl_complete"></i>&nbsp;<span class="screenreader-only">'+i+" (Completed)</span>",d="(Completed)",u="bs-bg-success"):c='<i class="far fa-circle kl_progress_complete"></i>&nbsp;<span class="screenreader-only">'+i+" ("+d+")</span>")}parseInt(t.id)===parseInt(klModuleDetails.currentModuleItemID)&&(s="bs-active"),("File"===a||"Discussion"===a||"Assignment"===a||"Quiz"===a)&&-1===i.indexOf(a)&&(i=i+", "+a);var p="";void 0!==t.new_tab&&t.new_tab&&(p=' target="_blank"'),void 0!==t.new_tab&&t.new_tab&&(p=' target="_blank"'),"SubHeader"!==a&&$("#"+l+" ol").append('<li class="'+s+" bs-page-item kl_mod_item_"+t.id+'"><a href="'+n+'" '+p+' title="'+i+" "+d+'" aria-label="'+i+" "+d+'" class="bs-page-link '+u+' dp-tooltip">'+c+'<i class="'+o+'" aria-hidden="true"></i></a></li>'),parseInt(t.id)===parseInt(klModuleDetails.currentModuleItemID)&&(s="kl_pending")})}).done(function(){0===$("#"+l+" .bs-active").length||($("#"+l+" .bs-page-item.bs-active .bs-page-link").css({"background-color":i,color:a}),$("#"+l+" .bs-active .kl_progress_complete").addClass("kl_progress_complete kl_complete"),$("#"+l+" .bs-active a").prepend('<i class="fas fa-map-marker-alt"></i> '),$("#"+l+" .bs-active a").attr("aria-current","page")),klModuleDetails.getAssignmentInfo()})):klModuleDetails.moduleProgressMessage("#"+l,"module progress bar/navigation")})}catch(e){klToolsLive.errorHandling("Module Progress Bar",e)}},seattleUNavigationTabs:function(){try{$(".dp_module_navigation_tabbed").addClass("dp_module_tabs_nav"),$(".dp_module_tabs_nav").length>0&&$(".dp_module_tabs_nav").each(function(e){var t,l="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID,s="dp_module_tabs_nav_"+e,i="",a="#ffffff",o="",n=!0,r=!1,d=!1,c=!0,u=!1,p='<i class="fas fa-angle-double-right" aria-hidden="true"></i> ';if(void 0!==$(this).attr("style")&&$(this).attr("style").includes("background-color")){i=$(this).css("background-color");var m=klColorsLive.hexCheck(i);a=$(this).css("color");var h=klColorsLive.checkContrast(i,"#f5f5f5","AA","small"),k=klColorsLive.getContrastYIQ(m);k=h?i:"#474747";var g="<style>:root {    --dp-tabs-nav-bg: "+i+";    --dp-tabs-nav-bg-text: "+a+";    --dp-tabs-nav-dark-text: "+k+";}</style>";$("head").append(g)}$(this).find("i").length>0&&(p=$(this).find("i")),$(this).hasClass("dp_module_tabs_nav_title_all")&&(n=!1),$(this).hasClass("dp_module_tabs_nav_title_after_colon")&&(n=!1,r=!0),$(this).hasClass("dp_module_tabs_nav_links_before_colon")&&(d=!0),$(this).hasClass("dp_module_tabs_nav_links_all")&&(c=!1),$(this).hasClass("dp_no_icon")&&(u=!0),$(this).attr("id",s),""===klModuleDetails.currentModuleID?klModuleDetails.moduleProgressMessage("#"+s,"module navigation tabs"):($("#"+s).replaceWith('<nav id="'+s+'" class="dp_tabs_nav '+s+'"><ul class="dp_tabs_nav_ul"></ul></nav>'),$.getJSON(l+"?include[]=items&per_page=100",function(e){if(klModuleDetails.currentModuleName=e.name,t=e.name,o=e,t.indexOf(":")>-1){var l=t.split(":");n?t=l[0]:r&&(t=l[l.length-1])}}).done(function(){try{var e="",l="",i="",a=0,n=!1;$.each(o.items,function(e,l){var i=l.title,a=l.type,o=l.html_url,n=l.id;if(i.indexOf(":")>-1){var r=i.split(":");d?i=r[0]:c&&(i=r[r.length-1])}if(0===e&&"SubHeader"!==a&&$("#"+s+" .dp_tabs_nav_ul").prepend('<li class="dp_tabs_nav_title"><a href="'+o+'">'+t+"</a></li>"),"SubHeader"===a){var u='<li class=" dp_tabs_nav_li_'+n+'" data-position="'+l.position+'">'+i+"</li>";$("#"+s+" .dp_tabs_nav_ul").append(u)}}),$.each(o.items,function(t,r){var m=r.title,h=r.type,k=r.html_url,g=klModuleDetails.typeIcon(h,r),b='<i class="'+g+'" aria-hidden="true"></i> ',f=r.id;if(m.indexOf(":")>-1){var v=m.split(":");d?m=v[0]:c&&(m=v[v.length-1])}if(u&&(b=""),"SubHeader"===h)""===l||""===e||n||1===a?n||(i='<ul class="dp_tabs_nav_sub_ul">',l="",a=0):($("#"+s).append(i+"</ul>"),i="",n=!0),e=f;else{a++,""!==e&&$(".dp_tabs_nav_li_"+e).each(function(){0===$(this).find("a").length&&$(this).wrapInner('<a href="'+k+'"></a>')});var M="";void 0!==r.new_tab&&r.new_tab&&(M=' target="_blank"'),r.indent<=1&&!n&&(i+='<li class="dp_tabs_sub_nav_li_'+f+'"><a href="'+k+'" '+M+">"+b+m+"</a></li>")}parseInt(klModuleDetails.currentModuleItemID)===parseInt(f)&&(l=f,$(".dp_tabs_nav_li_"+e).addClass("dp_tabs_nav_ul_active_page").attr("aria-current","true")),t===o.items.length-1&&""!==l&&""!==e&&(n||1===a||$("#"+s).append(i+"</ul>"),$(".dp_tabs_sub_nav_li_"+l).addClass("dp_tabs_nav_ul_active_sub_page").attr("aria-current","page"),$(".dp_tabs_sub_nav_li_"+l).each(function(){-1===$(this).find("a").html().indexOf(p)&&$(this).find("a").prepend(p)}))})}catch(r){console.log(r)}}))})}catch(e){klToolsLive.errorHandling("Module Heading Navigation",e)}},partialProgressNav:function(){try{$(".dp_module_progress_partial").length>0&&$(".dp_module_progress_partial").each(function(e){var t,l="/api/v1/courses/"+coursenum+"/modules/"+klModuleDetails.currentModuleID,s="dp_module_progress_partial_"+e,i="",a="#ffffff",o="",n=!0,r=!1,d=!1,c=!0,u=!1,p=!1;if(void 0!==$(this).attr("style")&&$(this).attr("style").includes("background-color")){i=$(this).css("background-color");var m=klColorsLive.hexCheck(i);a=$(this).css("color");var h=klColorsLive.checkContrast(i,"#f5f5f5","AA","small"),k=klColorsLive.getContrastYIQ(m);k=h?i:"#474747";var g="<style>:root {    --dp-progress-partial-bg: "+i+";    --dp-progress-partial-bg-text: "+a+";    --dp-progress-partial-dark-text: "+k+";}</style>";$("head").append(g)}$(this).hasClass("dp_nav_numbered")&&(p=!0),$(this).hasClass("dp_module_progress_partial_title_all")&&(n=!1),$(this).hasClass("dp_module_progress_partial_title_after_colon")&&(n=!1,r=!0),$(this).hasClass("dp_module_progress_partial_links_before_colon")&&(d=!0),$(this).hasClass("dp_module_progress_partial_links_all")&&(c=!1),$(this).hasClass("dp_module_progress_partial_hide_main")&&(u=!0),$(this).attr("id",s),""===klModuleDetails.currentModuleID?klModuleDetails.moduleProgressMessage("#"+s,"module partial navigation"):($("#"+s).replaceWith('<nav id="'+s+'" class="dp_module_progress_partial '+s+'"><ul class="dp_module_progress_partial_ul"></ul></nav>'),u&&$("#"+s+" .dp_module_progress_partial_ul").hide(),$.getJSON(l+"?include[]=items&per_page=100",function(e){if(klModuleDetails.currentModuleName=e.name,t=e.name,o=e,t.indexOf(":")>-1){var l=t.split(":");n?t=l[0]:r&&(t=l[l.length-1])}}).done(function(){try{var e="",l="",i="",a=0,n=!1;$.each(o.items,function(e,l){var i=l.title,a=l.type,o=l.html_url,n=l.id;if(i.indexOf(":")>-1){var r=i.split(":");d?i=r[0]:c&&(i=r[r.length-1])}if(0===e&&"SubHeader"!==a&&$("#"+s+" .dp_module_progress_partial_ul").prepend('<li class="dp_module_progress_partial_title"><a href="'+o+'">'+t+"</a></li>"),"SubHeader"===a){var u='<li class=" dp_module_progress_partial_li_'+n+'" data-position="'+l.position+'">'+i+"</li>";$("#"+s+" .dp_module_progress_partial_ul").append(u)}}),$.each(o.items,function(t,r){var u=r.title,m=r.type,h=r.html_url,k=klModuleDetails.typeIcon(m,r),g='<i class="'+k+'" aria-hidden="true"></i> ',b=r.id;if(u.indexOf(":")>-1){var f=u.split(":");d?u=f[0]:c&&(u=f[f.length-1])}if("SubHeader"===m)""===l||""===e||n||1===a?n||(i='<ul class="dp_module_progress_partial_sub_ul">',l="",a=0):($("#"+s).append(i+"</ul>"),i="",n=!0),e=b;else{a++,""!==e&&$(".dp_module_progress_partial_li_"+e).each(function(){0===$(this).find("a").length&&$(this).wrapInner('<a href="'+h+'"></a>')});var v="";void 0!==r.new_tab&&r.new_tab&&(v=' target="_blank"'),p&&(g='<i class="dp-icon-number">'+a+"</i>"),r.indent<=1&&!n&&(i+='<li class="dp_module_progress_partial_sub_nav_li_'+b+'"><a href="'+h+'" '+v+"><hr>"+g+'<span id="dp_module_progress_partial_name_'+b+'" class="dp_module_progress_partial_name">'+u+"</span></a></li>")}parseInt(klModuleDetails.currentModuleItemID)===parseInt(b)&&(l=b,$(".dp_module_progress_partial_li_"+e).addClass("dp_module_progress_partial_ul_active_page").attr("aria-current","true")),t===o.items.length-1&&""!==l&&""!==e&&(n||1===a||$("#"+s).append(i+"</ul>"),$(".dp_module_progress_partial_sub_nav_li_"+l).addClass("dp_module_progress_partial_ul_active_sub_page").attr("aria-current","page"),$(".dp_module_progress_partial_sub_nav_li_"+l).prevAll("li").addClass("dp_module_progress_partial_ul_completed_sub_page"),$(".dp_module_progress_partial_sub_nav_li_"+l).each(function(){}))})}catch(r){console.log(r)}}))})}catch(e){klToolsLive.errorHandling("Module Heading Navigation",e)}},findUnpublished:function(){"use strict";try{0===$(".kl_modules_tabbed").length&&$("#kl_modules").length>0&&$.getJSON("https://"+location.host+"/api/v1/courses/"+coursenum+"/modules?per_page=100",function(e){try{$.each(e,function(e,t){var l=t.id,s=$("#kl_modules a[href$='/courses/"+coursenum+"/modules/"+l+"']");s.addClass("kl_found"),void 0!==t.published&&!1===t.published&&s.addClass("kl_unpublished").prepend(klModuleDetails.unpublishedIcon)})}catch(t){klToolsLive.errorHandling("getJSON Modules Published",t)}}).done(function(){})}catch(e){klToolsLive.errorHandling("Published Module Check",e)}},currentModuleSR:function(){"use strict";try{$("#kl_modules .kl_current a").attr("aria-current","true")}catch(e){klToolsLive.errorHandling("Flag current module for screenreader")}},moduleCompleted:function(){try{$(".kl_wrapper .with-completion-requirements").closest(".context_module").addClass("has_requirements")}catch(e){klToolsLive.errorHandling("Flag current module for screenreader")}}};function klGetCourseNum(){"use strict";var e,t;return coursenum=null,(e=location.pathname.match(/\/courses\/(.*)/))&&(t=(coursenum=e[1]).indexOf("/",0))>=0&&(coursenum=coursenum.slice(0,t)),coursenum}function klGetURLParameter(e){return decodeURI((RegExp(e+"=(.+?)(&|$)").exec(location.search)||[null])[1])}function klPanelsLive(){}function accordionCheck(){if($(".kl_panels_accordion").length>0){var e,t=klGetURLParameter("panel"),l=document.location.href,s="",i=!1;"undefined"!==t&&(e=parseInt(t)-1,i=!0),l.indexOf("#")>-1&&(s=l.substring(l.indexOf("#"))),$(".kl_panels_accordion").each(function(t){var l,i;$(this).attr("id","kl_accordion_"+t),l={header:"ui-icon-triangle-1-e",activeHeader:"ui-icon-triangle-1-s"},""!==s&&$(s).closest(".kl_panel_content").length>0&&(s=$(s).closest(".kl_panel_content").attr("id").split("_content").join("")),i=""!==s&&$("#kl_accordion_"+t+" > .kl_panel_heading."+s).length>0?$("#kl_accordion_"+t+" > .kl_panel_heading."+s).index()/2:$("#kl_accordion_"+t+" > .kl_panel_heading.kl_panel_"+e).length>0?$("#kl_accordion_"+t+" > .kl_panel_heading.kl_panel_"+e).index()/2:$("#kl_accordion_"+t+" > .kl_panel_heading.kl_current").length>0&&void 0!==$("#kl_accordion_"+t+" .kl_panel_heading.kl_current").attr("id")&&$("#kl_accordion_"+t+" > .kl_panel_heading.kl_current").index()/2,$("#kl_accordion_"+t+" > .kl_panel_heading").each(function(){$(this).wrapInner('<a href="#"/>')}),$("#kl_wrapper_3 .kl_panels_wrapper iframe").length>0?setTimeout(function(){$("#kl_accordion_"+t).accordion({heightStyle:"content",icons:l,collapsible:!0,active:i,activate:function(e,t){$(t.oldPanel).find(".youtube-video").length}})},1e3):$("#kl_accordion_"+t).accordion({heightStyle:"content",icons:l,collapsible:!0,active:i}),$("#kl_accordion_"+t+" > .kl_panel_heading").each(function(){var e=$(this).css("background-color"),t=$(this).attr("style");void 0!==t&&"rgba(0, 0, 0, 0)"!==e&&"transparent"!==e&&t.indexOf("background");var l=$(this).attr("id");$(this).find("a").attr("href","#"+l),$(this).addClass("")})}),setTimeout(function(){i&&$(".kl_panel_heading.kl_panel_"+e).get(0).scrollIntoView()},300)}}function tabCheck(){if($(".kl_panels_tabs").length>0){var e,t=klGetURLParameter("panel"),l=document.location.href,s="",i=!1;"undefined"!==t&&(e=parseInt(t)-1,i=!0),l.indexOf("#")>-1&&(s=l.substring(l.indexOf("#"))),""!==s&&$(s).length>0&&$(s).closest(".kl_panel_content").length>0&&(s=$(s).closest(".kl_panel_content").attr("id").split("_content").join("")),s=s.split("#").join(""),$(".kl_panels_tabs").each(function(t){$(this).attr("id","kl_tabs_"+t);var l=$(this),a=0;$("#kl_tabs_"+t+" > .kl_panel_heading").length>0&&(l.prepend('<ul class="kl_temp_tab_list_'+t+'" />'),$("#kl_tabs_"+t+" > .kl_panel_heading").each(function(){var e=$(this).html(),l=$(this).attr("class"),s=$(this).attr("id"),i=$("#"+s).css("background-color"),a=$(this).attr("style");void 0!==a&&"rgba(0, 0, 0, 0)"!==i&&"transparent"!==i&&a.indexOf("background"),$("#kl_tabs_"+t+" > .kl_temp_tab_list_"+t).append('<li id="'+s+'" class="'+l+' "><a href="#'+s+'_content"  >'+e+"</a>"),$(this).remove()})),""!==s&&$(this).find(".kl_temp_tab_list_"+t+" > li.kl_panel_heading."+s).length>0?a=$(this).find(".kl_temp_tab_list_"+t+" > li.kl_panel_heading."+s).index():$(this).find(".kl_temp_tab_list_"+t+" > li.kl_panel_heading.kl_panel_"+e).length>0?a=$(this).find(".kl_temp_tab_list_"+t+" > li.kl_panel_heading.kl_panel_"+e).index():$(this).find(".kl_current").length>0&&(a=$(this).find(".kl_temp_tab_list_"+t+" > li.kl_current").index()),$("#kl_wrapper_3 .kl_panels_wrapper iframe").length>0||$("#kl_wrapper_3 .kl_css_editor").length>0?setTimeout(function(){("#kl_tabs_"+t).tabs({active:a,activate:function(e,t){$(t.oldPanel).find(".youtube-video").length}}),setTimeout(function(){i&&$(".kl_panel_heading.kl_panel_"+e).get(0).scrollIntoView()},300)},1e3):($("#kl_tabs_"+t).tabs({active:a}),setTimeout(function(){i&&$(".kl_panel_heading.kl_panel_"+e).get(0).scrollIntoView()},300))})}}function hideAddPeopleButton(){var e=window.location.host,t=window.location.pathname;"classroom.emeritus.org"===e&&t.startsWith("/accounts")&&$("button.[aria-label='Add people']").length>0&&(console.log("hideAddPeopleButton........"),$("button.[aria-label='Add people']").hide())}$(document).ready(function(){setTimeout(function(){$.cachedScript("https://classroom.emeritus.org/theme_overrides/js/accordion.js").done(function(e,t){console.log("accordion js loaded..."),setTimeout(function(){accordionCheck()},400)}).fail(function(e,t,l){})},400)}),$(document).ready(function(){setTimeout(function(){$.cachedScript("https://classroom.emeritus.org/theme_overrides/js/tabs.js").done(function(e,t){console.log("tab js loaded..."),setTimeout(function(){tabCheck()},400)}).fail(function(e,t,l){})},400)}),$(document).ready(function(){$("body").on("DOMSubtreeModified","div#content",function(){hideAddPeopleButton()}),setTimeout(function(){hideAddPeopleButton()},400)}),$(document).ready(function(){setTimeout(function(){console.log("Progress bar loaded..........."),setTimeout(function(){klModuleDetails.currentModule(),klModuleDetails.identifyCurrentModule(),klModuleDetails.moduleProgressionDisplay(),klModuleDetails.findUnpublished(),klModuleDetails.currentModuleSR(),klModuleDetails.moduleCompleted()},400)})});
function restrictCourseActions() {var host = window.location.host; var path = window.location.pathname; if(path.startsWith('/courses')) {if($('a.Button--course-settings').length > 0){$('a.Button--course-settings').each(function(idx){var a = $(this); var href = a.attr('href'); var actions = ['confirm_action?event=conclude', 'confirm_action?event=delete', 'reset']; for (var i = actions.length - 1; i >= 0; i--) { if(href.endsWith(actions[i])) {a.hide(); a.on('click', function(e) {e.preventDefault(); a.off("click").attr('href', "javascript: void(0);"); }); } } } ) } } }; $(document).ready(function() {setTimeout(function() {restrictCourseActions(); }, 100); });
$(document).ready(function(){window.location.pathname.startsWith("/login")&&setTimeout(function(){$.cachedScript("https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js").done(function(n,e){console.log("crypto-js.min loaded......"),setTimeout(function(){var n={secret:"c8a35f8622c45d3bf919506cb2f33223",verify(e){var[c,t]=e.split("--");return(signed_data=CryptoJS.HmacSHA256(c,n.secret).toString(CryptoJS.enc.Hex))==t&&atob(c)}},e=window.location.search,c=e.match(/email=([^&\n]+)/),t=e.match(/signed_params=([^&\n]+)/),a=document.querySelector("input[name='pseudonym_session[unique_id]']");null!==t&&(signedParams=n.verify(t[1]))&&(signedParams=signedParams.replaceAll('"',""),a.value=signedParams),null!==c&&(a.value=c[1])},100)}).fail(function(n,e,c){})},100)});$(document).ready(function(){$.getScript("https://resources-sd.emeritus.org/learner_dashboard/js/iframeResizer.min.js",function(){window.addEventListener("message",function(e){try{var s=e.data;switch(s.subject){case"lti.hideFrame":$("iframe").each(function(){$(this).attr("src").includes(s.subsrc)&&s.hide&&$(this).css("display","none")});case"lti.resizeFrame":console.log("Iframe Resizer Fuction called"),iFrameResize({log:!1,checkOrigin:!1},"#tool_content");break;case'lti.share':try{navigator.share({title:s.title,url:s.url});}catch(err){console.log(err);}break;case 'lti.resizeVideoFrame':$("iframe").each(function(){var src=$(this).attr('src');if(src.includes(s.videoId)){var mw=s.width;var mh=s.height;var frame=$(this)[0];frame.style.width=mw+'px';frame.style.height=mh+'px';}});break;}}catch(t){console.log(t)}})})});!function(e,t,a,r,g){e[r]=e[r]||[],e[r].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var n=t.getElementsByTagName(a)[0],s=t.createElement(a);s.async=!0,s.src="https://www.googletagmanager.com/gtm.js?id="+g+("dataLayer"!=r?"&l="+r:""),n.parentNode.insertBefore(s,n)}(window,document,"script","dataLayer","GTM-PTFDFBG");